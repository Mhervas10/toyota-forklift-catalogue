<ion-header>
  <ion-toolbar color="danger">
    <ion-buttons slot="end">
      <ion-button [routerLink]="['/favoritesForkLift']">
        <ion-icon ios="ios-heart" md="md-heart"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>ForkLift List</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="products" class="list-mini-content">
  <ion-toolbar>
    <ion-searchbar (ionInput)="getItems($event)" placeholder="Que modelo quieres buscar ..."></ion-searchbar>
    <ion-buttons slot="end">
      <ion-button (click)="valor1 = !valor1">
        <ion-icon slot="icon-only" name="md-funnel" color="danger"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>

  <!-- DESPLEGABLE FILTROS -->
  <ion-card class="filter-button" *ngIf="valor1">

    <ion-list>
      <ion-list-header>Load Capacity (kg)</ion-list-header>
      <ion-item *ngFor="let entry of filters">
        <ion-label>{{entry.value}}</ion-label>
        <ion-checkbox slot="end" (click)="checkboxClicked(entry)" slot="start" color="danger"></ion-checkbox>
      </ion-item>
    </ion-list>

  </ion-card>

  <div *ngIf="forkliftList.length > 0 else noData">
    <ion-grid>
      <ion-row>
        <ion-col size="6" *ngFor="let forklift of items">
          <ion-card (click)="goToDetail(forklift)" class="post">
            <img src="../../assets/imgs/{{forklift.model}}.jpg" />
            <ion-card-content>
              <ion-card-title>
                {{forklift.model | uppercase}}
              </ion-card-title>
              <p>
                {{forklift.loadCapacity}} kg.
              </p>
              <p>
                {{forklift.price}} €.
              </p>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>


  <!-- ****************** -->
  <!-- Lista de productos -->
  <!-- ****************** -->
  <ion-grid *ngIf="products.length > 0 && searchTerm == ''" align-items-start>
    <ion-grid *ngIf="status == 'products'" align-items-start>
      <ion-row>
        <ion-col size="6" *ngFor="let item of products">
          <ion-card (click)="goToDetail(item)" [ngClass]="{'background-gray': item.state == 'sold',
             'background-red':  item.state == 'cancelled'}">
            <img [src]="item.image" onError="this.src='./assets/imgs/default_image.jpg';">
            <ion-card-header>
              <ion-card-subtitle>{{item.category}}</ion-card-subtitle>
              <ion-card-title class="ion-card-custom-title">{{item.title}}</ion-card-title>
            </ion-card-header>

            <ion-card-content class="product-price">
              {{item.price}} €
            </ion-card-content>

            <!-- Buttons -->
            <ion-grid>
              <ion-row>
                <ion-col (click)="toggleFavorite(item);$event.stopPropagation()" align-self-end>
                  <ion-icon *ngIf="item.favorite !=true" class="favorite-icon" name="heart-empty"></ion-icon>
                  <ion-icon *ngIf="item.favorite ==true" class="favorite-icon" name="heart"></ion-icon>
                </ion-col>
              </ion-row>
            </ion-grid>

          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-grid>

    <!-- ********************* -->
    <!-- Resultados de búsqueda -->
    <!-- ********************** -->
    <ion-grid *ngIf="products.length > 0 && searchTerm != '' && searchededItems.length >0" align-items-start>
      <ion-grid *ngIf="status == 'search'" align-items-start>
        <ion-row>
          <ion-col size="6" *ngFor="let item of searchededItems">
            <ion-card (click)="goToDetail(item)" [ngClass]="{'background-gray': item.state == 'sold',
             'background-red':  item.state == 'cancelled'}">
              <img [src]="item.image" onError="this.src='./assets/imgs/default_image.jpg';">
              <ion-card-header>
                <ion-card-subtitle>{{item.category}}</ion-card-subtitle>
                <ion-card-title class="ion-card-custom-title">{{item.title}}</ion-card-title>
              </ion-card-header>

              <ion-card-content class="product-price">
                <!-- {{item.description}} -->
                {{item.price}} €
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-grid>


      <!-- ******************** -->
      <!-- Productos filtrados -->
      <!-- ******************* -->
      <ion-grid *ngIf="status == 'filter'" align-items-start>
        <ion-row>
          <ion-col size="6" *ngFor="let item of filteredItems">
            <ion-card (click)="goToDetail(item)" [ngClass]="{'background-gray': item.state == 'sold',
           'background-red':  item.state == 'cancelled'}">
              <img [src]="item.image" onError="this.src='./assets/imgs/default_image.jpg';">
              <ion-card-header>
                <ion-card-subtitle>{{item.category}}</ion-card-subtitle>
                <ion-card-title class="ion-card-custom-title">{{item.title}}</ion-card-title>
              </ion-card-header>

              <ion-card-content class="product-price">
                {{item.price}} €
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>

      <!-- SI NO HAY PRODUCTOS -->
      <div *ngIf="forkliftList.length == 0" class="empty-list">
        Please add new ForkLift.
      </div>
</ion-content>
<!-- FIN DEL BODY -->

<ion-footer>
  <ion-toolbar color="danger">
    <ion-buttons slot="end">
      <!-- BOTÓN DEL MENÚ -->
      <ion-menu-button color="light" menu="first">
      </ion-menu-button>
    </ion-buttons>
    <ion-title (click)="logout()">Log out</ion-title>
  </ion-toolbar>
</ion-footer>

<!-- COMPONENTE MENÚ -->
<!-- <app-menu></app-menu> -->
<div id="principal"></div>